<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informe Oficial | Academia Quijano</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        :root {
            --navy: #0f172a; --blue: #2563eb; --gold: #d97706;
            --risk: #ef4444; --safe: #10b981; --bg: #f1f5f9;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #cbd5e1;
            margin: 0;
            padding: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 40px; /* Separaci√≥n entre hojas en pantalla */
            color: var(--navy);
        }

        /* --- HOJA DE PAPEL (A4) --- */
        .page {
            background: white;
            width: 21cm; min-height: 29.7cm;
            padding: 1.5cm;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            box-sizing: border-box;
            position: relative;
        }

        /* --- ESTILOS P√ÅGINA 1 (DASHBOARD) --- */
        header { display: flex; justify-content: space-between; border-bottom: 2px solid #f1f5f9; padding-bottom: 20px; margin-bottom: 30px; }
        .brand h1 { margin: 0; font-size: 22px; font-weight: 800; color: var(--navy); }
        .brand span { color: var(--blue); }
        
        .ai-card { background: #0f172a; color: white; border-radius: 12px; padding: 25px; display: flex; gap: 20px; margin-bottom: 30px; }
        .grid-visuals { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; }
        
        /* KPIS */
        .kpi-row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: auto; }
        .kpi-box { background: #f8fafc; padding: 20px; text-align: center; border-radius: 8px; }
        .kpi-num { font-size: 36px; font-weight: 800; }

        /* --- ESTILOS P√ÅGINA 2 (TABLA DE M√âRITO) --- */
        .table-header { margin-bottom: 20px; text-align: center; }
        .table-header h2 { font-size: 18px; text-transform: uppercase; letter-spacing: 1px; color: var(--blue); margin: 0; }
        
        /* LA TABLA LINDA (Adi√≥s Excel) */
        .modern-table { width: 100%; border-collapse: collapse; font-size: 12px; }
        .modern-table th { 
            text-align: left; background: #f8fafc; color: #64748b; 
            text-transform: uppercase; font-size: 10px; letter-spacing: 1px;
            padding: 12px; border-bottom: 2px solid #e2e8f0;
        }
        .modern-table td { padding: 12px; border-bottom: 1px solid #f1f5f9; vertical-align: middle; }
        
        /* Filas alternadas sutiles */
        .modern-table tr:nth-child(even) { background-color: #fcfcfc; }
        
        /* Medallas */
        .rank-badge { 
            width: 24px; height: 24px; border-radius: 50%; 
            display: flex; align-items: center; justify-content: center; 
            font-weight: bold; color: white; font-size: 10px;
        }
        .gold-rank { background: #fbbf24; box-shadow: 0 2px 5px rgba(251, 191, 36, 0.4); }
        .silver-rank { background: #94a3b8; }
        .bronze-rank { background: #b45309; }
        .normal-rank { background: transparent; color: #64748b; font-size: 12px; }

        /* Barras peque√±as en la tabla */
        .mini-bar-bg { width: 60px; height: 4px; background: #e2e8f0; border-radius: 2px; display: inline-block; margin-right: 5px; }
        .mini-bar-fill { height: 100%; background: var(--blue); border-radius: 2px; }

        /* --- BOT√ìN Y PRINT --- */
        .fab { position: fixed; bottom: 30px; right: 30px; background: var(--navy); color: white; padding: 15px 30px; border-radius: 50px; border: none; font-weight: 700; cursor: pointer; box-shadow: 0 10px 20px rgba(0,0,0,0.3); }

        @media print {
            body { background: white; padding: 0; gap: 0; display: block; }
            .page { 
                width: 100%; height: auto; padding: 1.5cm; margin: 0; 
                box-shadow: none; page-break-after: always; /* MAGIA: Salto de hoja */
            }
            .page:last-child { page-break-after: auto; }
            .fab { display: none; }
            .ai-card, .rank-badge { -webkit-print-color-adjust: exact; }
        }
    </style>
</head>
<body>

    <div class="page">
        <header>
            <div class="brand"><h1>SISTEMA <span>QUIJANO</span></h1></div>
            <div style="text-align: right; font-size: 11px;">
                <strong id="sim-id">S-11</strong><br>
                <span id="muni-id">MUNICIPIO</span>
            </div>
        </header>

        <div class="ai-card">
            <div style="font-size: 30px;">ü§ñ</div>
            <div>
                <div style="font-size: 10px; opacity: 0.7; text-transform: uppercase;">An√°lisis de Inteligencia</div>
                <div style="font-size: 13px; margin-top: 5px;">
                    El grupo presenta una desviaci√≥n est√°ndar baja, indicando homogeneidad. 
                    Se recomienda enfocar recursos en el <strong>Top 15%</strong> para asegurar becas de excelencia, 
                    mientras se mantiene el plan de nivelaci√≥n en Matem√°ticas.
                </div>
            </div>
        </div>

        <div class="grid-visuals" style="height: 400px;">
            <div style="border:1px solid #e2e8f0; border-radius:12px; padding:15px;">
                <canvas id="radarChart"></canvas>
            </div>
            <div style="border:1px solid #e2e8f0; border-radius:12px; padding:20px; display:flex; flex-direction:column; justify-content:center;">
                <h3 style="margin-top:0; font-size:14px; color:#64748b;">MAPA DE CALOR</h3>
                <div style="display:grid; gap:10px;">
                    <div style="display:flex; justify-content:space-between; font-size:12px;">
                        <span>Lectura</span> <span style="font-weight:bold; color:var(--safe)">71 (Alto)</span>
                    </div>
                    <div style="width:100%; height:6px; background:#e2e8f0; border-radius:3px;"><div style="width:71%; background:var(--safe); height:100%; border-radius:3px;"></div></div>
                    
                    <div style="display:flex; justify-content:space-between; font-size:12px; margin-top:10px;">
                        <span>Matem√°ticas</span> <span style="font-weight:bold; color:var(--risk)">45 (Bajo)</span>
                    </div>
                    <div style="width:100%; height:6px; background:#e2e8f0; border-radius:3px;"><div style="width:45%; background:var(--risk); height:100%; border-radius:3px;"></div></div>

                    <div style="display:flex; justify-content:space-between; font-size:12px; margin-top:10px;">
                        <span>Ingl√©s</span> <span style="font-weight:bold; color:#f59e0b">60 (Medio)</span>
                    </div>
                    <div style="width:100%; height:6px; background:#e2e8f0; border-radius:3px;"><div style="width:60%; background:#f59e0b; height:100%; border-radius:3px;"></div></div>
                </div>
            </div>
        </div>

        <div class="kpi-row">
            <div class="kpi-box"><div style="font-size:10px;">PROMEDIO</div><div class="kpi-num" id="kpi-avg" style="color:var(--navy)">0</div></div>
            <div class="kpi-box"><div style="font-size:10px;">EXCELENCIA</div><div class="kpi-num" id="kpi-exc" style="color:var(--safe)">0%</div></div>
            <div class="kpi-box"><div style="font-size:10px;">RIESGO</div><div class="kpi-num" id="kpi-ini" style="color:var(--risk)">0%</div></div>
        </div>
    </div>

    <div class="page">
        <div class="table-header">
            <h2>Cuadro de M√©rito Acad√©mico</h2>
            <p style="font-size: 11px; color: #64748b;">Listado oficial de desempe√±o destacado y consolidado.</p>
        </div>

        <table class="modern-table">
            <thead>
                <tr>
                    <th style="width: 50px;">RK</th>
                    <th>Estudiante</th>
                    <th>Lectura</th>
                    <th>Matem</th>
                    <th>Ciencias</th>
                    <th>Global</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><div class="rank-badge gold-rank">1</div></td>
                    <td><strong>AGUIRRE DAVILA DANA</strong></td>
                    <td>71</td>
                    <td>68</td>
                    <td><span style="color:var(--safe); font-weight:bold;">75</span></td>
                    <td><strong style="color:var(--blue)">380</strong></td>
                </tr>
                <tr>
                    <td><div class="rank-badge silver-rank">2</div></td>
                    <td>ANACONA BOLA√ëOS ANDRES</td>
                    <td>68</td>
                    <td>65</td>
                    <td>60</td>
                    <td><strong>365</strong></td>
                </tr>
                <tr>
                    <td><div class="rank-badge bronze-rank">3</div></td>
                    <td>ARCOS NANDAR OSCAR</td>
                    <td>65</td>
                    <td>62</td>
                    <td>58</td>
                    <td><strong>350</strong></td>
                </tr>
                <tr>
                    <td><div class="rank-badge normal-rank">4</div></td>
                    <td>CHAPUEL MOLINA YESITH</td>
                    <td>60</td>
                    <td>55</td>
                    <td>50</td>
                    <td>310</td>
                </tr>
                <tr>
                    <td><div class="rank-badge normal-rank">5</div></td>
                    <td>CIFUENTES JACOME GABRIELA</td>
                    <td>58</td>
                    <td><span style="color:var(--risk)">40</span></td>
                    <td>48</td>
                    <td>290</td>
                </tr>
                </tbody>
        </table>

        <div style="margin-top: auto; padding-top: 20px; border-top: 1px solid #e2e8f0; display: flex; justify-content: space-between; align-items: flex-end;">
            <div style="font-size: 10px; color: #94a3b8;">
                Generado el 16/01/2026<br>
                Hash: <span id="v-code">---</span>
            </div>
            <div style="text-align: center;">
                <div style="width: 150px; border-bottom: 1px solid #0f172a; margin-bottom: 5px;"></div>
                <div style="font-size: 11px; font-weight: bold;">Coordinaci√≥n Acad√©mica</div>
            </div>
        </div>
    </div>

    <button class="fab" onclick="window.print()">üñ®Ô∏è IMPRIMIR REPORTE</button>

    <script>
        const p = new URLSearchParams(window.location.search);
        
        // Cargar datos b√°sicos (solo para que no se vea vac√≠o el demo)
        document.getElementById('muni-display').innerText = (p.get('muni') || 'GENERAL').toUpperCase();
        document.getElementById('sim-id').innerText = p.get('sim') || 'S-11';
        document.getElementById('kpi-avg').innerText = p.get('avg') || 0;
        document.getElementById('kpi-exc').innerText = (p.get('exc')||0) + "%";
        document.getElementById('kpi-ini').innerText = (p.get('ini')||0) + "%";
        document.getElementById('v-code').innerText = p.get('v') || 'NO-DATA';

        // Radar Chart
        const ctx = document.getElementById('radarChart').getContext('2d');
        Chart.defaults.font.family = "'Inter', sans-serif";
        new Chart(ctx, {
            type: 'radar',
            data: {
                labels: ['LEC', 'MAT', 'SOC', 'CIE', 'ING'],
                datasets: [{
                    label: 'Puntaje',
                    data: [p.get('lec')||50, p.get('mat')||50, p.get('soc')||50, p.get('cie')||50, p.get('ing')||50],
                    backgroundColor: 'rgba(37, 99, 235, 0.2)',
                    borderColor: '#2563eb',
                    borderWidth: 2,
                    pointBackgroundColor: '#fff'
                }]
            },
            options: { scales: { r: { beginAtZero: true, max: 100, ticks: { display: false } } }, plugins: { legend: { display: false } } }
        });
    </script>
</body>
</html>
