<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informe Gerencial | Quijano Intelligence</title>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        :root {
            --dark: #0f172a;
            --blue: #0a2540;
            --gold: #d4af37;
            --gray: #64748b;
            --light: #f8fafc;
        }

        body {
            font-family: 'Manrope', sans-serif;
            background: #e2e8f0;
            margin: 0;
            padding: 40px;
            display: flex;
            justify-content: center;
            color: var(--dark);
        }

        /* --- HOJA DE PAPEL DIGITAL (ESTILO REVISTA) --- */
        .page {
            background: white;
            width: 21cm; /* Ancho A4 */
            min-height: 29.7cm; /* Alto A4 */
            padding: 2cm;
            box-shadow: 0 20px 50px rgba(0,0,0,0.1);
            display: grid;
            grid-template-rows: auto auto 1fr auto;
            gap: 30px;
            box-sizing: border-box;
        }

        /* 1. ENCABEZADO CORPORATIVO */
        header {
            border-bottom: 3px solid var(--blue);
            padding-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
        }
        .brand h1 { margin: 0; font-size: 24px; text-transform: uppercase; letter-spacing: 2px; color: var(--blue); }
        .brand span { color: var(--gold); font-weight: 800; }
        .meta-data { text-align: right; font-size: 12px; color: var(--gray); }
        .meta-data strong { display: block; color: var(--dark); font-size: 14px; }

        /* 2. RESUMEN EJECUTIVO (BIG NUMBERS) */
        .executive-summary {
            display: grid;
            grid-template-columns: 1fr 1fr;
            background: var(--light);
            border-radius: 12px;
            padding: 30px;
            gap: 40px;
            border: 1px solid #e2e8f0;
        }
        .big-stat label { font-size: 11px; text-transform: uppercase; letter-spacing: 1px; color: var(--gray); display: block; margin-bottom: 5px; }
        .big-stat .number { font-size: 48px; font-weight: 800; color: var(--blue); line-height: 1; }
        .big-stat .trend { font-size: 14px; font-weight: 600; color: var(--gold); }

        /* 3. CONTENIDO A 2 COLUMNAS (ESTILO NETFLIX/AIRBNB) */
        .report-body {
            display: grid;
            grid-template-columns: 1fr 1fr; /* Mitad texto, mitad gr√°fico */
            gap: 40px;
            align-items: start;
        }

        /* Columna Izquierda: An√°lisis y Barras */
        .analysis-section h3 { font-size: 16px; border-left: 4px solid var(--gold); padding-left: 10px; margin-top: 0; color: var(--blue); }
        .analysis-text { font-size: 13px; line-height: 1.6; color: #475569; margin-bottom: 30px; text-align: justify; }

        .progress-item { margin-bottom: 15px; }
        .p-label { display: flex; justify-content: space-between; font-size: 11px; font-weight: 700; margin-bottom: 5px; }
        .p-bar-bg { background: #e2e8f0; height: 8px; border-radius: 4px; overflow: hidden; }
        .p-bar-fill { height: 100%; background: var(--blue); width: 0%; transition: width 1s ease; }
        
        /* Columna Derecha: El Radar Visual */
        .visual-section {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            position: relative;
        }
        .badge {
            position: absolute; top: 10px; right: 10px;
            background: var(--blue); color: white;
            padding: 5px 10px; font-size: 10px; font-weight: 700;
            border-radius: 4px;
        }

        /* 4. FOOTER */
        footer {
            border-top: 1px solid #e2e8f0;
            padding-top: 15px;
            font-size: 10px;
            color: var(--gray);
            display: flex;
            justify-content: space-between;
        }

        /* BOT√ìN IMPRIMIR */
        .btn-print {
            position: fixed; bottom: 30px; right: 30px;
            background: var(--gold); color: var(--blue);
            border: none; padding: 15px 30px; border-radius: 50px;
            font-weight: 800; cursor: pointer;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        /* --- MODO IMPRESI√ìN (EL SECRETO) --- */
        @media print {
            body { background: white; padding: 0; }
            .page { box-shadow: none; width: 100%; min-height: 100vh; margin: 0; padding: 1.5cm; }
            .btn-print { display: none; }
            .executive-summary { -webkit-print-color-adjust: exact; print-color-adjust: exact; background: #f8fafc !important; }
            .p-bar-fill { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
        }
    </style>
</head>
<body>

    <div class="page">
        <header>
            <div class="brand">
                <h1>Academia <span>Quijano</span></h1>
                <div style="font-size: 12px; letter-spacing: 3px; color: var(--gray);">INFORME DE INTELIGENCIA</div>
            </div>
            <div class="meta-data">
                <span id="date-display">16 ENE 2026</span>
                <strong id="sim-id">SIMULACRO S-11</strong>
                <span id="muni-id">PASTO, NARI√ëO</span>
            </div>
        </header>

        <div class="executive-summary">
            <div class="big-stat">
                <label>Puntaje Global Promedio</label>
                <div class="number" id="val-global">0</div>
                <div class="trend" id="txt-risk">Analizando datos...</div>
            </div>
            <div class="big-stat">
                <label>Nivel de Excelencia</label>
                <div class="number" id="val-exc">0%</div>
                <div class="trend">Estudiantes Superiores</div>
            </div>
        </div>

        <div class="report-body">
            
            <div class="analysis-section">
                <h3>DIAGN√ìSTICO T√âCNICO</h3>
                <p class="analysis-text" id="analysis-paragraph">
                    Este informe presenta el consolidado de rendimiento acad√©mico. 
                    Las m√©tricas a continuaci√≥n desglosan el desempe√±o por √°rea de n√∫cleo com√∫n, 
                    permitiendo identificar brechas de aprendizaje y fortalezas grupales.
                </p>

                <div style="margin-top: 40px;">
                    <div class="progress-item">
                        <div class="p-label"><span>LECTURA CR√çTICA</span> <span id="lbl-lec">0</span></div>
                        <div class="p-bar-bg"><div class="p-bar-fill" id="bar-lec"></div></div>
                    </div>
                    <div class="progress-item">
                        <div class="p-label"><span>MATEM√ÅTICAS</span> <span id="lbl-mat">0</span></div>
                        <div class="p-bar-bg"><div class="p-bar-fill" id="bar-mat"></div></div>
                    </div>
                    <div class="progress-item">
                        <div class="p-label"><span>SOCIALES</span> <span id="lbl-soc">0</span></div>
                        <div class="p-bar-bg"><div class="p-bar-fill" id="bar-soc"></div></div>
                    </div>
                    <div class="progress-item">
                        <div class="p-label"><span>CIENCIAS</span> <span id="lbl-cie">0</span></div>
                        <div class="p-bar-bg"><div class="p-bar-fill" id="bar-cie"></div></div>
                    </div>
                    <div class="progress-item">
                        <div class="p-label"><span>INGL√âS</span> <span id="lbl-ing">0</span></div>
                        <div class="p-bar-bg"><div class="p-bar-fill" id="bar-ing"></div></div>
                    </div>
                </div>
            </div>

            <div class="visual-section">
                <div class="badge">RADAR 2026</div>
                <canvas id="radarChart"></canvas>
                <div style="margin-top: 20px; font-size: 11px; color: #64748b; text-align: center;">
                    El gr√°fico muestra la simetr√≠a del conocimiento. 
                    √Åreas retra√≠das hacia el centro indican necesidad de refuerzo.
                </div>
            </div>
        </div>

        <footer>
            <div>ID VERIFICACI√ìN: <strong id="v-code">---</strong></div>
            <div>GENERADO POR SISTEMA QUIJANO V.57</div>
        </footer>
    </div>

    <button class="btn-print" onclick="window.print()">üñ®Ô∏è IMPRIMIR / PDF</button>

    <script>
        // MOTOR DE DATOS
        const p = new URLSearchParams(window.location.search);
        
        // Datos b√°sicos
        document.getElementById('sim-id').innerText = p.get('sim') || 'SIMULACRO';
        document.getElementById('muni-id').innerText = (p.get('muni') || 'GENERAL').toUpperCase();
        document.getElementById('v-code').innerText = p.get('v') || 'NO-DATA';
        
        // KPIs
        const avg = p.get('avg') || 0;
        document.getElementById('val-global').innerText = avg;
        document.getElementById('val-exc').innerText = (p.get('exc') || 0) + '%';

        // An√°lisis de Texto Din√°mico
        const ini = parseInt(p.get('ini') || 0);
        const riskTxt = document.getElementById('txt-risk');
        if(ini > 20) {
            riskTxt.innerText = "‚ö†Ô∏è Requiere Atenci√≥n Inmediata";
            riskTxt.style.color = "#ef4444";
        } else {
            riskTxt.innerText = "‚úÖ Rendimiento Estable";
            riskTxt.style.color = "#10b981";
        }

        // Funci√≥n para animar barras
        function setBar(id, val) {
            document.getElementById('lbl-'+id).innerText = val;
            document.getElementById('bar-'+id).style.width = val + '%';
            // Color din√°mico de la barra
            if(val < 50) document.getElementById('bar-'+id).style.background = "#ef4444"; // Rojo
            else if(val >= 70) document.getElementById('bar-'+id).style.background = "#10b981"; // Verde
        }

        const lec = p.get('lec')||0; setBar('lec', lec);
        const mat = p.get('mat')||0; setBar('mat', mat);
        const soc = p.get('soc')||0; setBar('soc', soc);
        const cie = p.get('cie')||0; setBar('cie', cie);
        const ing = p.get('ing')||0; setBar('ing', ing);

        // Radar Chart Elegante
        const ctx = document.getElementById('radarChart').getContext('2d');
        Chart.defaults.font.family = "'Manrope', sans-serif";
        new Chart(ctx, {
            type: 'radar',
            data: {
                labels: ['LECTURA', 'MATEM√ÅTICAS', 'SOCIALES', 'CIENCIAS', 'INGL√âS'],
                datasets: [{
                    label: 'Nivel Grupo',
                    data: [lec, mat, soc, cie, ing],
                    backgroundColor: 'rgba(10, 37, 64, 0.2)',
                    borderColor: '#0a2540',
                    borderWidth: 2,
                    pointBackgroundColor: '#d4af37',
                    pointRadius: 4
                }]
            },
            options: {
                scales: {
                    r: {
                        beginAtZero: true, max: 100,
                        ticks: { display: false },
                        pointLabels: { font: { size: 10, weight: '700' }, color: '#64748b' }
                    }
                },
                plugins: { legend: { display: false } }
            }
        });
    </script>
</body>
</html>
